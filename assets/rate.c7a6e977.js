
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * https://fantastic-admin.netlify.app
 * 代码仓库
 * Gitee  https://gitee.com/hooray/fantastic-admin
 * Github https://github.com/hooray/fantastic-admin
 */
    
var e=Object.defineProperty,l=Object.defineProperties,a=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,u=(l,a,o)=>a in l?e(l,a,{enumerable:!0,configurable:!0,writable:!0,value:o}):l[a]=o;import{U as s,W as i,aQ as d,c6 as n,V as c,c7 as v,ah as m,d as f,P as p,bu as b,bw as y,b0 as h,u as V,a$ as x,r as w,c as g,bt as j,aS as S,A as O,b as k,f as C,M as T,Q as I,n as H,i as M,h as P,w as _,e as A,I as B,m as N,k as U,E as $,L as D,_ as E,aK as L,a6 as W,q,v as F,bl as K,H as Q,bL as z,bO as R}from"./index.773474dc.js";import X from"./alert.c3eb6172.js";import{i as G}from"./validator2.7c472023.js";import{C as J,U as Y}from"./event2.c09267d7.js";import"./el-alert.5c137829.js";import"./el-link.1df0c4c7.js";const Z=s({modelValue:{type:Number,default:0},id:{type:String,default:void 0},lowThreshold:{type:Number,default:2},highThreshold:{type:Number,default:4},max:{type:Number,default:5},colors:{type:i([Array,Object]),default:()=>d(["","",""])},voidColor:{type:String,default:""},disabledVoidColor:{type:String,default:""},icons:{type:i([Array,Object]),default:()=>[n,n,n]},voidIcon:{type:c,default:()=>v},disabledVoidIcon:{type:c,default:()=>n},disabled:{type:Boolean},allowHalf:{type:Boolean},showText:{type:Boolean},showScore:{type:Boolean},textColor:{type:String,default:""},texts:{type:i(Array),default:()=>d(["Extremely bad","Disappointed","Fair","Satisfied","Surprise"])},scoreTemplate:{type:String,default:"{value}"},size:{type:String,validator:G},label:{type:String,default:void 0}}),ee={[J]:e=>m(e),[Y]:e=>m(e)},le=["id","aria-label","aria-labelledby","aria-valuenow","aria-valuetext","aria-valuemax"],ae=["onMousemove","onClick"],oe=f((te=((e,l)=>{for(var a in l||(l={}))t.call(l,a)&&u(e,a,l[a]);if(o)for(var a of o(l))r.call(l,a)&&u(e,a,l[a]);return e})({},{name:"ElRate"}),re={props:Z,emits:ee,setup(e,{expose:l,emit:a}){const o=e;function t(e,l){const a=e=>S(e),o=Object.keys(l).map((e=>+e)).filter((o=>{const t=l[o];return a(t)&&t.excluded?e<o:e<=o})).sort(((e,l)=>e-l)),t=l[o[0]];return a(t)&&t.value||t}const r=p(b,void 0),u=p(y,void 0),s=h(),i=V("rate"),{inputId:d,isLabeledByFormItem:n}=x(o,{formItemContext:u}),c=w(o.modelValue),v=w(-1),m=w(!0),f=g((()=>[i.b(),i.m(s.value)])),E=g((()=>o.disabled||(null==r?void 0:r.disabled))),q=g((()=>i.cssVarBlock({"void-color":o.voidColor,"disabled-void-color":o.disabledVoidColor,"fill-color":z.value}))),F=g((()=>{let e="";return o.showScore?e=o.scoreTemplate.replace(/\{\s*value\s*\}/,E.value?`${o.modelValue}`:`${c.value}`):o.showText&&(e=o.texts[Math.ceil(c.value)-1]),e})),K=g((()=>100*o.modelValue-100*Math.floor(o.modelValue))),Q=g((()=>j(o.colors)?{[o.lowThreshold]:o.colors[0],[o.highThreshold]:{value:o.colors[1],excluded:!0},[o.max]:o.colors[2]}:o.colors)),z=g((()=>{const e=t(c.value,Q.value);return S(e)?"":e})),R=g((()=>{let e="";return E.value?e=`${K.value}%`:o.allowHalf&&(e="50%"),{color:z.value,width:e}})),X=g((()=>j(o.icons)?{[o.lowThreshold]:o.icons[0],[o.highThreshold]:{value:o.icons[1],excluded:!0},[o.max]:o.icons[2]}:o.icons)),G=g((()=>t(o.modelValue,X.value))),J=g((()=>E.value?o.disabledVoidIcon:o.voidIcon)),Z=g((()=>t(c.value,X.value))),ee=g((()=>{const e=Array.from({length:o.max}),l=c.value;return e.fill(Z.value,0,l),e.fill(J.value,l,o.max),e}));function oe(e){const l=E.value&&K.value>0&&e-1<o.modelValue&&e>o.modelValue,a=o.allowHalf&&m.value&&e-.5<=c.value&&e>c.value;return l||a}function te(e){if(E.value)return;let l=c.value;const t=e.code;return t===L.up||t===L.right?(o.allowHalf?l+=.5:l+=1,e.stopPropagation(),e.preventDefault()):t!==L.left&&t!==L.down||(o.allowHalf?l-=.5:l-=1,e.stopPropagation(),e.preventDefault()),l=l<0?0:l,l=l>o.max?o.max:l,a(Y,l),a("change",l),l}function re(e,l){if(!E.value){if(o.allowHalf){let a=l.target;W(a,i.e("item"))&&(a=a.querySelector(`.${i.e("icon")}`)),(0===a.clientWidth||W(a,i.e("decimal")))&&(a=a.parentNode),m.value=2*l.offsetX<=a.clientWidth,c.value=m.value?e-.5:e}else c.value=e;v.value=e}}function ue(){E.value||(o.allowHalf&&(m.value=o.modelValue!==Math.floor(o.modelValue)),c.value=o.modelValue,v.value=-1)}return O((()=>o.modelValue),(e=>{c.value=e,m.value=o.modelValue!==Math.floor(o.modelValue)})),o.modelValue||a(Y,0),l({setCurrentValue:re,resetCurrentValue:ue}),(e,l)=>(k(),C("div",{id:M(d),class:H([M(f),M(i).is("disabled",M(E))]),role:"slider","aria-label":M(n)?void 0:e.label||"rating","aria-labelledby":M(n)?M(u).labelId:void 0,"aria-valuenow":c.value,"aria-valuetext":M(F)||void 0,"aria-valuemin":"0","aria-valuemax":e.max,tabindex:"0",style:U(M(q)),onKeydown:te},[(k(!0),C(T,null,I(e.max,((e,l)=>(k(),C("span",{key:l,class:H(M(i).e("item")),onMousemove:l=>re(e,l),onMouseleave:ue,onClick:l=>{return t=e,void(E.value||(o.allowHalf&&m.value?(a(Y,c.value),o.modelValue!==c.value&&a("change",c.value)):(a(Y,t),o.modelValue!==t&&a("change",t))));var t}},[P(M($),{class:H([M(i).e("icon"),{hover:v.value===e},M(i).is("active",e<=c.value)])},{default:_((()=>[oe(e)?N("v-if",!0):(k(),A(B(M(ee)[e-1]),{key:0})),oe(e)?(k(),A(M($),{key:1,style:U(M(R)),class:H([M(i).e("icon"),M(i).e("decimal")])},{default:_((()=>[(k(),A(B(M(G))))])),_:1},8,["style","class"])):N("v-if",!0)])),_:2},1032,["class"])],42,ae)))),128)),e.showText||e.showScore?(k(),C("span",{key:0,class:H(M(i).e("text"))},D(M(F)),3)):N("v-if",!0)],46,le))}},l(te,a(re))));var te,re;const ue=q(E(oe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/rate/src/rate.vue"]]));const se={components:{Alert:X},data:()=>({value1:null,value2:null,value3:3.7})};"function"==typeof K&&K(se);var ie=F(se,[["render",function(e,l,a,o,t,r){const u=Q("Alert"),s=R,i=ue,d=z;return k(),C("div",null,[P(u),P(s,{title:"评分"}),P(d,{title:"基础用法",class:"demo"},{default:_((()=>[P(i,{modelValue:t.value1,"onUpdate:modelValue":l[0]||(l[0]=e=>t.value1=e)},null,8,["modelValue"])])),_:1}),P(d,{title:"辅助文字",class:"demo"},{default:_((()=>[P(i,{modelValue:t.value2,"onUpdate:modelValue":l[1]||(l[1]=e=>t.value2=e),"show-text":"",texts:["极差","差","一般","好","极好"]},null,8,["modelValue"])])),_:1}),P(d,{title:"只读",class:"demo"},{default:_((()=>[P(i,{modelValue:t.value3,"onUpdate:modelValue":l[2]||(l[2]=e=>t.value3=e),disabled:"","show-score":"","text-color":"#ff9900","score-template":"{value}"},null,8,["modelValue"])])),_:1})])}]]);export{ie as default};
