
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * https://fantastic-admin.netlify.app
 * 代码仓库
 * Gitee  https://gitee.com/hooray/fantastic-admin
 * Github https://github.com/hooray/fantastic-admin
 */
    
import{V as e,X as l,aP as a,c6 as o,W as t,c7 as u,aB as s,d as r,Q as d,bx as i,by as n,b1 as v,u as c,b0 as m,r as f,c as p,bz as b,aT as h,C as y,b as V,f as x,N as w,R as g,n as S,i as k,h as C,w as T,e as j,I,m as H,k as M,E as _,M as B,_ as A,aJ as N,a7 as U,q as $,v as D,bs as E,G as O,bt as P,bw as W}from"./index.84c9bfd8.js";import q from"./alert.62ee8977.js";import{i as z}from"./validator.3268d51f.js";import{C as F,U as R}from"./event.d298a7ab.js";import"./el-alert.0cce966b.js";import"./el-link.9df77598.js";const X=e({modelValue:{type:Number,default:0},id:{type:String,default:void 0},lowThreshold:{type:Number,default:2},highThreshold:{type:Number,default:4},max:{type:Number,default:5},colors:{type:l([Array,Object]),default:()=>a(["","",""])},voidColor:{type:String,default:""},disabledVoidColor:{type:String,default:""},icons:{type:l([Array,Object]),default:()=>[o,o,o]},voidIcon:{type:t,default:()=>u},disabledVoidIcon:{type:t,default:()=>o},disabled:{type:Boolean},allowHalf:{type:Boolean},showText:{type:Boolean},showScore:{type:Boolean},textColor:{type:String,default:""},texts:{type:l(Array),default:()=>a(["Extremely bad","Disappointed","Fair","Satisfied","Surprise"])},scoreTemplate:{type:String,default:"{value}"},size:{type:String,validator:z},label:{type:String,default:void 0}}),G=["id","aria-label","aria-labelledby","aria-valuenow","aria-valuetext","aria-valuemax"],J=["onMousemove","onClick"];const K=$(A(r({name:"ElRate",props:X,emits:{[F]:e=>s(e),[R]:e=>s(e)},setup(e,{expose:l,emit:a}){const o=e;function t(e,l){const a=e=>h(e),o=Object.keys(l).map((e=>+e)).filter((o=>{const t=l[o];return!!a(t)&&t.excluded?e<o:e<=o})).sort(((e,l)=>e-l)),t=l[o[0]];return a(t)&&t.value||t}const u=d(i,void 0),s=d(n,void 0),r=v(),A=c("rate"),{inputId:$,isLabeledByFormItem:D}=m(o,{formItemContext:s}),E=f(o.modelValue),O=f(-1),P=f(!0),W=p((()=>[A.b(),A.m(r.value)])),q=p((()=>o.disabled||(null==u?void 0:u.disabled))),z=p((()=>A.cssVarBlock({"void-color":o.voidColor,"disabled-void-color":o.disabledVoidColor,"fill-color":L.value}))),F=p((()=>{let e="";return o.showScore?e=o.scoreTemplate.replace(/\{\s*value\s*\}/,q.value?`${o.modelValue}`:`${E.value}`):o.showText&&(e=o.texts[Math.ceil(E.value)-1]),e})),X=p((()=>100*o.modelValue-100*Math.floor(o.modelValue))),K=p((()=>b(o.colors)?{[o.lowThreshold]:o.colors[0],[o.highThreshold]:{value:o.colors[1],excluded:!0},[o.max]:o.colors[2]}:o.colors)),L=p((()=>{const e=t(E.value,K.value);return h(e)?"":e})),Q=p((()=>{let e="";return q.value?e=`${X.value}%`:o.allowHalf&&(e="50%"),{color:L.value,width:e}})),Y=p((()=>b(o.icons)?{[o.lowThreshold]:o.icons[0],[o.highThreshold]:{value:o.icons[1],excluded:!0},[o.max]:o.icons[2]}:o.icons)),Z=p((()=>t(o.modelValue,Y.value))),ee=p((()=>q.value?o.disabledVoidIcon:o.voidIcon)),le=p((()=>t(E.value,Y.value))),ae=p((()=>{const e=Array.from({length:o.max}),l=E.value;return e.fill(le.value,0,l),e.fill(ee.value,l,o.max),e}));function oe(e){const l=q.value&&X.value>0&&e-1<o.modelValue&&e>o.modelValue,a=o.allowHalf&&P.value&&e-.5<=E.value&&e>E.value;return l||a}function te(e){if(q.value)return;let l=E.value;const t=e.code;return t===N.up||t===N.right?(o.allowHalf?l+=.5:l+=1,e.stopPropagation(),e.preventDefault()):t!==N.left&&t!==N.down||(o.allowHalf?l-=.5:l-=1,e.stopPropagation(),e.preventDefault()),l=l<0?0:l,l=l>o.max?o.max:l,a(R,l),a("change",l),l}function ue(e,l){if(!q.value){if(o.allowHalf){let a=l.target;U(a,A.e("item"))&&(a=a.querySelector(`.${A.e("icon")}`)),(0===a.clientWidth||U(a,A.e("decimal")))&&(a=a.parentNode),P.value=2*l.offsetX<=a.clientWidth,E.value=P.value?e-.5:e}else E.value=e;O.value=e}}function se(){q.value||(o.allowHalf&&(P.value=o.modelValue!==Math.floor(o.modelValue)),E.value=o.modelValue,O.value=-1)}return y((()=>o.modelValue),(e=>{E.value=e,P.value=o.modelValue!==Math.floor(o.modelValue)})),o.modelValue||a(R,0),l({setCurrentValue:ue,resetCurrentValue:se}),(e,l)=>{var t;return V(),x("div",{id:k($),class:S([k(W),k(A).is("disabled",k(q))]),role:"slider","aria-label":k(D)?void 0:e.label||"rating","aria-labelledby":k(D)?null==(t=k(s))?void 0:t.labelId:void 0,"aria-valuenow":E.value,"aria-valuetext":k(F)||void 0,"aria-valuemin":"0","aria-valuemax":e.max,tabindex:"0",style:M(k(z)),onKeydown:te},[(V(!0),x(w,null,g(e.max,((e,l)=>(V(),x("span",{key:l,class:S(k(A).e("item")),onMousemove:l=>ue(e,l),onMouseleave:se,onClick:l=>{return t=e,void(q.value||(o.allowHalf&&P.value?(a(R,E.value),o.modelValue!==E.value&&a("change",E.value)):(a(R,t),o.modelValue!==t&&a("change",t))));var t}},[C(k(_),{class:S([k(A).e("icon"),{hover:O.value===e},k(A).is("active",e<=E.value)])},{default:T((()=>[oe(e)?H("v-if",!0):(V(),j(I(k(ae)[e-1]),{key:0})),oe(e)?(V(),j(k(_),{key:1,style:M(k(Q)),class:S([k(A).e("icon"),k(A).e("decimal")])},{default:T((()=>[(V(),j(I(k(Z))))])),_:1},8,["style","class"])):H("v-if",!0)])),_:2},1032,["class"])],42,J)))),128)),e.showText||e.showScore?(V(),x("span",{key:0,class:S(k(A).e("text"))},B(k(F)),3)):H("v-if",!0)],46,G)}}}),[["__file","/home/runner/work/element-plus/element-plus/packages/components/rate/src/rate.vue"]])),L={components:{Alert:q},data:()=>({value1:null,value2:null,value3:3.7})};"function"==typeof E&&E(L);const Q=D(L,[["render",function(e,l,a,o,t,u){const s=O("Alert"),r=W,d=K,i=P;return V(),x("div",null,[C(s),C(r,{title:"评分"}),C(i,{title:"基础用法",class:"demo"},{default:T((()=>[C(d,{modelValue:t.value1,"onUpdate:modelValue":l[0]||(l[0]=e=>t.value1=e)},null,8,["modelValue"])])),_:1}),C(i,{title:"辅助文字",class:"demo"},{default:T((()=>[C(d,{modelValue:t.value2,"onUpdate:modelValue":l[1]||(l[1]=e=>t.value2=e),"show-text":"",texts:["极差","差","一般","好","极好"]},null,8,["modelValue"])])),_:1}),C(i,{title:"只读",class:"demo"},{default:T((()=>[C(d,{modelValue:t.value3,"onUpdate:modelValue":l[2]||(l[2]=e=>t.value3=e),disabled:"","show-score":"","text-color":"#ff9900","score-template":"{value}"},null,8,["modelValue"])])),_:1})])}]]);export{Q as default};
