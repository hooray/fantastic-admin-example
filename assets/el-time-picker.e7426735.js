
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * https://fantastic-admin.netlify.app
 * 代码仓库
 * Gitee  https://gitee.com/hooray/fantastic-admin
 * Github https://github.com/hooray/fantastic-admin
 */
    
import{ci as e,bV as n,V as a,X as t,d as r,aq as s,u as l,Q as o,c as i,r as u,b as c,f as p,H as d,n as m,i as f,M as v,h as b,m as g,_ as h,bD as k,bz as w,aJ as S,F as y,aH as A}from"./index.84c9bfd8.js";import{d as V,u as _,f as O,g as x,h as R,c as C,t as E,T,i as D,C as H}from"./panel-time-pick.126100bb.js";import{b as I}from"./_baseFlatten.8f82f422.js";import{a as M,S as P,s as j,b as B,c as F}from"./isEqual.7e94fa38.js";function q(e){return e}function K(e,n,a){switch(a.length){case 0:return e.call(n);case 1:return e.call(n,a[0]);case 2:return e.call(n,a[0],a[1]);case 3:return e.call(n,a[0],a[1],a[2])}return e.apply(n,a)}var U=Date.now;var z=e?function(n,a){return e(n,"toString",{configurable:!0,enumerable:!1,value:(t=a,function(){return t}),writable:!0});var t}:q;var J,Q,X;const $=(J=z,Q=0,X=0,function(){var e=U(),n=16-(e-X);if(X=e,n>0){if(++Q>=800)return arguments[0]}else Q=0;return J.apply(void 0,arguments)});function G(e){return e!=e}function L(e,n){return!!(null==e?0:e.length)&&function(e,n,a){return n==n?function(e,n,a){for(var t=a-1,r=e.length;++t<r;)if(e[t]===n)return t;return-1}(e,n,a):function(e,n,a,t){for(var r=e.length,s=a+(t?1:-1);t?s--:++s<r;)if(n(e[s],s,e))return s;return-1}(e,G,a)}(e,n,0)>-1}var N=Math.max;function W(e){return n(e)&&M(e)}function Y(e,n,a){for(var t=-1,r=null==e?0:e.length;++t<r;)if(a(n,e[t]))return!0;return!1}const Z=P&&1/j(new P([,-0]))[1]==1/0?function(e){return new P(e)}:function(){};var ee=function(e,n){return $(function(e,n,a){return n=N(void 0===n?e.length-1:n,0),function(){for(var t=arguments,r=-1,s=N(t.length-n,0),l=Array(s);++r<s;)l[r]=t[n+r];r=-1;for(var o=Array(n+1);++r<n;)o[r]=t[r];return o[n]=a(l),K(e,this,o)}}(e,n,q),e+"")}((function(e){return function(e,n,a){var t=-1,r=L,s=e.length,l=!0,o=[],i=o;if(a)l=!1,r=Y;else if(s>=200){var u=n?null:Z(e);if(u)return j(u);l=!1,r=F,i=new B}else i=n?[]:o;e:for(;++t<s;){var c=e[t],p=n?n(c):c;if(c=a||0!==c?c:0,l&&p==p){for(var d=i.length;d--;)if(i[d]===p)continue e;n&&i.push(p),o.push(c)}else r(i,p,a)||(i!==o&&i.push(p),o.push(c))}return o}(I(e,1,W,!0))}));const ne=ee,ae=a({...V,parsedValue:{type:t(Array)}}),te=["disabled"];var re=h(r({__name:"panel-time-range",props:ae,emits:["pick","select-range","set-picker-option"],setup(e,{emit:n}){const a=e,t=(e,n)=>{const a=[];for(let t=e;t<=n;t++)a.push(t);return a},{t:r,lang:h}=s(),y=l("time"),A=l("picker"),V=o("EP_PICKER_BASE"),{arrowControl:C,disabledHours:E,disabledMinutes:T,disabledSeconds:D,defaultValue:H}=V.props,I=i((()=>a.parsedValue[0])),M=i((()=>a.parsedValue[1])),P=_(a),j=i((()=>a.format.includes("ss"))),B=i((()=>a.format.includes("A")?"A":a.format.includes("a")?"a":"")),F=e=>{K(e.millisecond(0),M.value)},q=e=>{K(I.value,e.millisecond(0))},K=(e,a)=>{n("pick",[e,a],!0)},U=i((()=>I.value>M.value)),z=u([0,2]),J=(e,a)=>{n("select-range",e,a,"min"),z.value=[e,a]},Q=i((()=>j.value?11:8)),X=(e,a)=>{n("select-range",e,a,"max");const t=f(Q);z.value=[e+t,a+t]},$=(e,n)=>{const a=E?E(e):[],r="start"===e,s=(n||(r?M.value:I.value)).hour(),l=r?t(s+1,23):t(0,s-1);return ne(a,l)},G=(e,n,a)=>{const r=T?T(e,n):[],s="start"===n,l=a||(s?M.value:I.value);if(e!==l.hour())return r;const o=l.minute(),i=s?t(o+1,59):t(0,o-1);return ne(r,i)},L=(e,n,a,r)=>{const s=D?D(e,n,a):[],l="start"===a,o=r||(l?M.value:I.value),i=o.hour(),u=o.minute();if(e!==i||n!==u)return s;const c=o.second(),p=l?t(c+1,59):t(0,c-1);return ne(s,p)},N=([e,n])=>[ae(e,"start",!0,n),ae(n,"end",!1,e)],{getAvailableHours:W,getAvailableMinutes:Y,getAvailableSeconds:Z}=O($,G,L),{timePickerOptions:ee,getAvailableTime:ae,onSetOption:re}=x({getAvailableHours:W,getAvailableMinutes:Y,getAvailableSeconds:Z});return n("set-picker-option",["formatToString",e=>e?w(e)?e.map((e=>e.format(a.format))):e.format(a.format):null]),n("set-picker-option",["parseUserInput",e=>e?w(e)?e.map((e=>k(e,a.format).locale(h.value))):k(e,a.format).locale(h.value):null]),n("set-picker-option",["isValidValue",e=>{const n=e.map((e=>k(e).locale(h.value))),a=N(n);return n[0].isSame(a[0])&&n[1].isSame(a[1])}]),n("set-picker-option",["handleKeydownInput",e=>{const n=e.code,{left:a,right:t,up:r,down:s}=S;if([a,t].includes(n)){return(e=>{const n=j.value?[0,3,6,11,14,17]:[0,3,8,11],a=["hours","minutes"].concat(j.value?["seconds"]:[]),t=(n.indexOf(z.value[0])+e+n.length)%n.length,r=n.length/2;t<r?ee.start_emitSelectRange(a[t]):ee.end_emitSelectRange(a[t-r])})(n===a?-1:1),void e.preventDefault()}if([r,s].includes(n)){const a=n===r?-1:1,t=z.value[0]<Q.value?"start":"end";return ee[`${t}_scrollDown`](a),void e.preventDefault()}}]),n("set-picker-option",["getDefaultValue",()=>{if(w(H))return H.map((e=>k(e).locale(h.value)));const e=k(H).locale(h.value);return[e,e.add(60,"m")]}]),n("set-picker-option",["getRangeAvailableTime",N]),(e,a)=>e.actualVisible?(c(),p("div",{key:0,class:m([f(y).b("range-picker"),f(A).b("panel")])},[d("div",{class:m(f(y).be("range-picker","content"))},[d("div",{class:m(f(y).be("range-picker","cell"))},[d("div",{class:m(f(y).be("range-picker","header"))},v(f(r)("el.datepicker.startTime")),3),d("div",{class:m([f(y).be("range-picker","body"),f(y).be("panel","content"),f(y).is("arrow",f(C)),{"has-seconds":f(j)}])},[b(R,{ref:"minSpinner",role:"start","show-seconds":f(j),"am-pm-mode":f(B),"arrow-control":f(C),"spinner-date":f(I),"disabled-hours":$,"disabled-minutes":G,"disabled-seconds":L,onChange:F,onSetOption:f(re),onSelectRange:J},null,8,["show-seconds","am-pm-mode","arrow-control","spinner-date","onSetOption"])],2)],2),d("div",{class:m(f(y).be("range-picker","cell"))},[d("div",{class:m(f(y).be("range-picker","header"))},v(f(r)("el.datepicker.endTime")),3),d("div",{class:m([f(y).be("range-picker","body"),f(y).be("panel","content"),f(y).is("arrow",f(C)),{"has-seconds":f(j)}])},[b(R,{ref:"maxSpinner",role:"end","show-seconds":f(j),"am-pm-mode":f(B),"arrow-control":f(C),"spinner-date":f(M),"disabled-hours":$,"disabled-minutes":G,"disabled-seconds":L,onChange:q,onSetOption:f(re),onSelectRange:X},null,8,["show-seconds","am-pm-mode","arrow-control","spinner-date","onSetOption"])],2)],2)],2),d("div",{class:m(f(y).be("panel","footer"))},[d("button",{type:"button",class:m([f(y).be("panel","btn"),"cancel"]),onClick:a[0]||(a[0]=e=>{n("pick",P.value,!1)})},v(f(r)("el.datepicker.cancel")),3),d("button",{type:"button",class:m([f(y).be("panel","btn"),"confirm"]),disabled:f(U),onClick:a[1]||(a[1]=e=>((e=!1)=>{n("pick",[I.value,M.value],e)})())},v(f(r)("el.datepicker.confirm")),11,te)],2)],2)):g("v-if",!0)}}),[["__file","/home/runner/work/element-plus/element-plus/packages/components/time-picker/src/time-picker-com/panel-time-range.vue"]]);k.extend(C);const se=r({name:"ElTimePicker",install:null,props:{...E,isRange:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(e,n){const a=u(),[t,r]=e.isRange?["timerange",re]:["time",T],s=e=>n.emit("update:modelValue",e);return y("ElPopperOptions",e.popperOptions),n.expose({focus:e=>{var n;null==(n=a.value)||n.handleFocusInput(e)},blur:e=>{var n;null==(n=a.value)||n.handleBlurInput(e)}}),()=>{var n;const l=null!=(n=e.format)?n:D;return b(H,A(e,{ref:a,type:t,format:l,"onUpdate:modelValue":s}),{default:e=>b(r,e,null)})}}});se.install=e=>{e.component(se.name,se)};const le=se;export{le as E};
