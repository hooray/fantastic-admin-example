
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * https://fantastic-admin.netlify.app
 * 代码仓库
 * Gitee  https://gitee.com/hooray/fantastic-admin
 * Github https://github.com/hooray/fantastic-admin
 */
    
import{u as e,r as s,aP as n,dE as o,a0 as t,ae as l,w as i,ar as a,as as r,h as u,T as d,ac as c,a6 as m,al as p,aC as b,ag as v,a8 as g,aa as f,aV as w,a4 as y,dY as x,y as h,aF as k,az as C,bx as _,f as L,bu as V,bv as A,cg as j,b as $,i as B,D as P,G as E,R as T,dZ as I,ax as N,by as O}from"./index.2c25f648.js";/* empty css               *//* empty css                       *//* empty css                        *//* empty css                   */import{E as R,a as S}from"./index.9c787878.js";import{E as z}from"./index.edd029bd.js";import"./event.d298a7ab.js";let Z;const q=function(b={}){if(!m)return;const v=D(b);if(v.fullscreen&&Z)return Z;const g=function(m){let p;const b=e("loading"),v=s(!1),g=n({...m,originalPosition:"",originalOverflow:"",visible:!1});function f(){const e=g.parent;if(!e.vLoadingAddClassList){let s=e.getAttribute("loading-number");s=Number.parseInt(s)-1,s?e.setAttribute("loading-number",s.toString()):(c(e,b.bm("parent","relative")),e.removeAttribute("loading-number")),c(e,b.bm("parent","hidden"))}w(),x.unmount()}function w(){var e,s;null==(s=null==(e=h.$el)?void 0:e.parentNode)||s.removeChild(h.$el)}function y(){v.value&&(v.value=!1,f())}const x=o({name:"ElLoading",setup:()=>()=>{const e=g.spinner||g.svg,s=l("svg",{class:"circular",viewBox:g.svgViewBox?g.svgViewBox:"25 25 50 50",...e?{innerHTML:e}:{}},[l("circle",{class:"path",cx:"50",cy:"50",r:"20",fill:"none"})]),n=g.text?l("p",{class:b.b("text")},[g.text]):void 0;return l(d,{name:b.b("fade"),onAfterLeave:y},{default:i((()=>[a(u("div",{style:{backgroundColor:g.background||""},class:[b.b("mask"),g.customClass,g.fullscreen?"is-fullscreen":""]},[l("div",{class:b.b("spinner")},[s,n])]),[[r,g.visible]])]))})}}),h=x.mount(document.createElement("div"));return{...t(g),setText:function(e){g.text=e},removeElLoadingChild:w,close:function(){var e;m.beforeClose&&!m.beforeClose()||(g.parent.vLoadingAddClassList=void 0,v.value=!0,clearTimeout(p),p=window.setTimeout((()=>{v.value&&(v.value=!1,f())}),400),g.visible=!1,null==(e=m.closed)||e.call(m))},handleAfterLeave:y,vm:h,get $el(){return h.$el}}}({...v,closed:()=>{var e;null==(e=v.closed)||e.call(v),v.fullscreen&&(Z=void 0)}});F(v,v.parent,g),G(v,v.parent,g),v.parent.vLoadingAddClassList=()=>G(v,v.parent,g);let f=v.parent.getAttribute("loading-number");return f=f?`${Number.parseInt(f)+1}`:"1",v.parent.setAttribute("loading-number",f),v.parent.appendChild(g.$el),p((()=>g.visible.value=v.visible)),v.fullscreen&&(Z=g),g},D=e=>{var s,n,o,t;let l;return l=b(e.target)?null!=(s=document.querySelector(e.target))?s:document.body:e.target||document.body,{parent:l===document.body||e.body?document.body:l,background:e.background||"",svg:e.svg||"",svgViewBox:e.svgViewBox||"",spinner:e.spinner||!1,text:e.text||"",fullscreen:l===document.body&&(null==(n=e.fullscreen)||n),lock:null!=(o=e.lock)&&o,customClass:e.customClass||"",visible:null==(t=e.visible)||t,target:l}},F=async(e,s,n)=>{const{nextZIndex:o}=v(),t={};if(e.fullscreen)n.originalPosition.value=g(document.body,"position"),n.originalOverflow.value=g(document.body,"overflow"),t.zIndex=o();else if(e.parent===document.body){n.originalPosition.value=g(document.body,"position"),await p();for(const s of["top","left"]){const n="top"===s?"scrollTop":"scrollLeft";t[s]=e.target.getBoundingClientRect()[s]+document.body[n]+document.documentElement[n]-Number.parseInt(g(document.body,`margin-${s}`),10)+"px"}for(const s of["height","width"])t[s]=`${e.target.getBoundingClientRect()[s]}px`}else n.originalPosition.value=g(s,"position");for(const[l,i]of Object.entries(t))n.$el.style[l]=i},G=(s,n,o)=>{const t=e("loading");"absolute"!==o.originalPosition.value&&"fixed"!==o.originalPosition.value?f(n,t.bm("parent","relative")):c(n,t.bm("parent","relative")),s.fullscreen&&s.lock?f(n,t.bm("parent","hidden")):c(n,t.bm("parent","hidden"))},H=Symbol("ElLoading"),M=(e,n)=>{var o,t,l,i;const a=n.instance,r=e=>w(n.value)?n.value[e]:void 0,u=n=>(e=>{const n=b(e)&&(null==a?void 0:a[e])||e;return n?s(n):n})(r(n)||e.getAttribute(`element-loading-${x(n)}`)),d=null!=(o=r("fullscreen"))?o:n.modifiers.fullscreen,c={text:u("text"),svg:u("svg"),svgViewBox:u("svgViewBox"),spinner:u("spinner"),background:u("background"),customClass:u("customClass"),fullscreen:d,target:null!=(t=r("target"))?t:d?void 0:e,body:null!=(l=r("body"))?l:n.modifiers.body,lock:null!=(i=r("lock"))?i:n.modifiers.lock};e[H]={options:c,instance:q(c)}},U={mounted(e,s){s.value&&M(e,s)},updated(e,s){const n=e[H];s.oldValue!==s.value&&(s.value&&!s.oldValue?M(e,s):s.value&&s.oldValue?w(s.value)&&((e,s)=>{for(const n of Object.keys(s))y(s[n])&&(s[n].value=e[n])})(s.value,n.options):null==n||n.instance.close())},unmounted(e){var s;null==(s=e[H])||s.instance.close()}},Y={install(e){e.directive("loading",U),e.config.globalProperties.$loading=q},directive:U,service:q},J={key:0},K={key:1},Q=P("h3",null,"切换帐号",-1),W=P("h3",null,"帐号权限",-1),X=P("h3",null,"鉴权组件（请对照代码查看）",-1),ee=T("你有 permission.browse 权限"),se=T("你没有 permission.browse 权限"),ne=T("你有 permission.create 权限"),oe=T("你没有 permission.create 权限"),te=T("你有 permission.browse 或 permission.create 权限"),le=T("你没有 permission.browse 或 permission.create 权限"),ie=T("你有 permission.browse 和 permission.create 权限"),ae=T("你没有 permission.browse 和 permission.create 权限"),re=P("h3",null,"鉴权指令（请对照代码查看）",-1),ue=[T(" 如果你有 permission.browse 权限则能看到这句话 ")],de=[T(" 如果你有 permission.create 权限则能看到这句话 ")],ce=[T(" 如果你有 permission.browse 或 permission.create 权限则能看到这句话 ")],me=[T(" 如果你有 permission.browse 和 permission.create 权限则能看到这句话 ")],pe=P("h3",null,"鉴权函数（请对照代码查看）",-1),be=T("校验 permission.browse 权限"),ve=T("校验 permission.create 权限"),ge=T("校验 permission.browse 或 permission.create 权限"),fe=T("校验 permission.browse 和 permission.create 权限"),we={__name:"index",setup(e){const s=h(),n=k(),{auth:o,authAll:t}=I();function l(e){Y.service({lock:!0,text:"帐号切换中",background:"rgba(0, 0, 0, 0.7)"}),n.login({account:e,password:""}).then((()=>{setTimeout((()=>{location.reload()}),1e3)}))}function r(e){o(e)?N.success("校验通过"):N.error("校验不通过")}return(e,d)=>{const c=O,m=R,p=S,b=z,v=C,g=_,f=A,w=j("auth"),y=j("auth-all");return $(),L("div",null,[u(c,{title:"权限验证"}),u(f,null,{default:i((()=>[B(s).app.enablePermission?($(),L("div",K,[Q,u(p,{modelValue:B(n).account,"onUpdate:modelValue":d[0]||(d[0]=e=>B(n).account=e),onChange:l},{default:i((()=>[u(m,{label:"admin"}),u(m,{label:"test"})])),_:1},8,["modelValue"]),W,P("div",null,E(B(n).permissions),1),X,P("div",null,[u(B(o),{value:"permission.browse",style:{"margin-bottom":"10px"}},{"no-auth":i((()=>[u(b,{type:"danger"},{default:i((()=>[se])),_:1})])),default:i((()=>[u(b,null,{default:i((()=>[ee])),_:1})])),_:1}),u(B(o),{value:"permission.create",style:{"margin-bottom":"10px"}},{"no-auth":i((()=>[u(b,{type:"danger"},{default:i((()=>[oe])),_:1})])),default:i((()=>[u(b,null,{default:i((()=>[ne])),_:1})])),_:1}),u(B(o),{value:["permission.browse","permission.create"],style:{"margin-bottom":"10px"}},{"no-auth":i((()=>[u(b,{type:"danger"},{default:i((()=>[le])),_:1})])),default:i((()=>[u(b,null,{default:i((()=>[te])),_:1})])),_:1},8,["value"]),u(B(t),{value:["permission.browse","permission.create"]},{"no-auth":i((()=>[u(b,{type:"danger"},{default:i((()=>[ae])),_:1})])),default:i((()=>[u(b,null,{default:i((()=>[ie])),_:1})])),_:1},8,["value"])]),re,P("div",null,[a(($(),L("div",null,ue)),[[w,"permission.browse"]]),a(($(),L("div",null,de)),[[w,"permission.create"]]),a(($(),L("div",null,ce)),[[w,["permission.browse","permission.create"]]]),a(($(),L("div",null,me)),[[y,["permission.browse","permission.create"]]])]),pe,P("div",null,[u(g,{style:{display:"block","margin-bottom":"10px"}},{default:i((()=>[u(v,{onClick:d[1]||(d[1]=e=>r("permission.browse"))},{default:i((()=>[be])),_:1}),u(v,{onClick:d[2]||(d[2]=e=>r("permission.create"))},{default:i((()=>[ve])),_:1})])),_:1}),u(g,null,{default:i((()=>[u(v,{onClick:d[3]||(d[3]=e=>r(["permission.browse","permission.create"]))},{default:i((()=>[ge])),_:1}),u(v,{onClick:d[4]||(d[4]=e=>{t(["permission.browse","permission.create"])?N.success("校验通过"):N.error("校验不通过")})},{default:i((()=>[fe])),_:1})])),_:1})])])):($(),L("div",J,"请到 seeting.js 里打开权限功能，再进入该页面查看演示"))])),_:1})])}}};"function"==typeof V&&V(we);export{we as default};
