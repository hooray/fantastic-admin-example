
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * https://fantastic-admin.netlify.app
 * 代码仓库
 * Gitee  https://gitee.com/hooray/fantastic-admin
 * Github https://github.com/hooray/fantastic-admin
 */
    
var e=Object.defineProperty,s=Object.defineProperties,t=Object.getOwnPropertyDescriptors,n=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,i=(s,t,n)=>t in s?e(s,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):s[t]=n,a=(e,s)=>{for(var t in s||(s={}))o.call(s,t)&&i(e,t,s[t]);if(n)for(var t of n(s))l.call(s,t)&&i(e,t,s[t]);return e},r=(e,n)=>s(e,t(n));import{X as u,u as d,r as c,aO as m,dA as p,ab as b,ad as v,w as f,aq as g,ar as y,h as w,T as x,a5 as h,ak as k,aB as _,af as C,a7 as j,a9 as A,aS as O,dV as $,a4 as L,d as P,b as V,f as B,dW as E,g as T,x as I,aD as N,aw as S,bN as q,bl as z,bL as D,i as R,B as H,L as M,$ as U,az as W,bO as X,C as Z}from"./index.6dffb2c9.js";import{_ as F}from"./index.002afbfc.js";/* empty css               *//* empty css                       *//* empty css                        */import{E as G,a as J}from"./index2.6bec34fc.js";import{E as K}from"./index2.da9499e5.js";import"./event2.c09267d7.js";let Q;const Y=function(e={}){if(!h)return;const s=ee(e);if(s.fullscreen&&Q)return Q;const t=function(e){let s;const t=d("loading"),n=c(!1),o=m(r(a({},e),{originalPosition:"",originalOverflow:"",visible:!1}));function l(){const e=o.parent;if(!e.vLoadingAddClassList){let s=e.getAttribute("loading-number");s=Number.parseInt(s)-1,s?e.setAttribute("loading-number",s.toString()):(b(e,t.bm("parent","relative")),e.removeAttribute("loading-number")),b(e,t.bm("parent","hidden"))}i(),k.unmount()}function i(){var e,s;null==(s=null==(e=_.$el)?void 0:e.parentNode)||s.removeChild(_.$el)}function h(){n.value&&(n.value=!1,l())}const k=p({name:"ElLoading",setup:()=>()=>{const e=o.spinner||o.svg,s=v("svg",a({class:"circular",viewBox:o.svgViewBox?o.svgViewBox:"25 25 50 50"},e?{innerHTML:e}:{}),[v("circle",{class:"path",cx:"50",cy:"50",r:"20",fill:"none"})]),n=o.text?v("p",{class:t.b("text")},[o.text]):void 0;return v(x,{name:t.b("fade"),onAfterLeave:h},{default:f((()=>[g(w("div",{style:{backgroundColor:o.background||""},class:[t.b("mask"),o.customClass,o.fullscreen?"is-fullscreen":""]},[v("div",{class:t.b("spinner")},[s,n])]),[[y,o.visible]])]))})}}),_=k.mount(document.createElement("div"));return r(a({},u(o)),{setText:function(e){o.text=e},removeElLoadingChild:i,close:function(){var t;e.beforeClose&&!e.beforeClose()||(o.parent.vLoadingAddClassList=void 0,n.value=!0,clearTimeout(s),s=window.setTimeout((()=>{n.value&&(n.value=!1,l())}),400),o.visible=!1,null==(t=e.closed)||t.call(e))},handleAfterLeave:h,vm:_,get $el(){return _.$el}})}(r(a({},s),{closed:()=>{var e;null==(e=s.closed)||e.call(s),s.fullscreen&&(Q=void 0)}}));se(s,s.parent,t),te(s,s.parent,t),s.parent.vLoadingAddClassList=()=>te(s,s.parent,t);let n=s.parent.getAttribute("loading-number");return n=n?`${Number.parseInt(n)+1}`:"1",s.parent.setAttribute("loading-number",n),s.parent.appendChild(t.$el),k((()=>t.visible.value=s.visible)),s.fullscreen&&(Q=t),t},ee=e=>{var s,t,n,o;let l;return l=_(e.target)?null!=(s=document.querySelector(e.target))?s:document.body:e.target||document.body,{parent:l===document.body||e.body?document.body:l,background:e.background||"",svg:e.svg||"",svgViewBox:e.svgViewBox||"",spinner:e.spinner||!1,text:e.text||"",fullscreen:l===document.body&&(null==(t=e.fullscreen)||t),lock:null!=(n=e.lock)&&n,customClass:e.customClass||"",visible:null==(o=e.visible)||o,target:l}},se=async(e,s,t)=>{const{nextZIndex:n}=C(),o={};if(e.fullscreen)t.originalPosition.value=j(document.body,"position"),t.originalOverflow.value=j(document.body,"overflow"),o.zIndex=n();else if(e.parent===document.body){t.originalPosition.value=j(document.body,"position"),await k();for(const s of["top","left"]){const t="top"===s?"scrollTop":"scrollLeft";o[s]=e.target.getBoundingClientRect()[s]+document.body[t]+document.documentElement[t]-Number.parseInt(j(document.body,`margin-${s}`),10)+"px"}for(const s of["height","width"])o[s]=`${e.target.getBoundingClientRect()[s]}px`}else t.originalPosition.value=j(s,"position");for(const[l,i]of Object.entries(o))t.$el.style[l]=i},te=(e,s,t)=>{const n=d("loading");"absolute"!==t.originalPosition.value&&"fixed"!==t.originalPosition.value?A(s,n.bm("parent","relative")):b(s,n.bm("parent","relative")),e.fullscreen&&e.lock?A(s,n.bm("parent","hidden")):b(s,n.bm("parent","hidden"))},ne=Symbol("ElLoading"),oe=(e,s)=>{var t,n,o,l;const i=s.instance,a=e=>O(s.value)?s.value[e]:void 0,r=s=>(e=>{const s=_(e)&&(null==i?void 0:i[e])||e;return s?c(s):s})(a(s)||e.getAttribute(`element-loading-${$(s)}`)),u=null!=(t=a("fullscreen"))?t:s.modifiers.fullscreen,d={text:r("text"),svg:r("svg"),svgViewBox:r("svgViewBox"),spinner:r("spinner"),background:r("background"),customClass:r("customClass"),fullscreen:u,target:null!=(n=a("target"))?n:u?void 0:e,body:null!=(o=a("body"))?o:s.modifiers.body,lock:null!=(l=a("lock"))?l:s.modifiers.lock};e[ne]={options:d,instance:Y(d)}},le={mounted(e,s){s.value&&oe(e,s)},updated(e,s){const t=e[ne];s.oldValue!==s.value&&(s.value&&!s.oldValue?oe(e,s):s.value&&s.oldValue?O(s.value)&&((e,s)=>{for(const t of Object.keys(s))L(s[t])&&(s[t].value=e[t])})(s.value,t.options):null==t||t.instance.close())},unmounted(e){var s;null==(s=e[ne])||s.instance.close()}},ie={install(e){e.directive("loading",le),e.config.globalProperties.$loading=Y},directive:le,service:Y},ae=P({name:"AuthAll"}),re=Object.assign(ae,{props:{value:{type:Array,default:()=>[]}},setup(e){const s=e;return(e,t)=>(V(),B("div",null,[E(s.value)?T(e.$slots,"default",{key:0}):T(e.$slots,"no-auth",{key:1})]))}});const ue={key:0},de={key:1},ce=H("h3",null,"切换帐号",-1),me=H("h3",null,"帐号权限",-1),pe=H("h3",null,"鉴权组件（请对照代码查看）",-1),be=U("你有 permission.browse 权限"),ve=U("你没有 permission.browse 权限"),fe=U("你有 permission.create 权限"),ge=U("你没有 permission.create 权限"),ye=U("你有 permission.browse 或 permission.create 权限"),we=U("你没有 permission.browse 或 permission.create 权限"),xe=U("你有 permission.browse 和 permission.create 权限"),he=U("你没有 permission.browse 和 permission.create 权限"),ke=H("h3",null,"鉴权指令（请对照代码查看）",-1),_e=[U(" 如果你有 permission.browse 权限则能看到这句话 ")],Ce=[U(" 如果你有 permission.create 权限则能看到这句话 ")],je=[U(" 如果你有 permission.browse 或 permission.create 权限则能看到这句话 ")],Ae=[U(" 如果你有 permission.browse 和 permission.create 权限则能看到这句话 ")],Oe=H("h3",null,"鉴权函数（请对照代码查看）",-1),$e=U("校验 permission.browse 权限"),Le=U("校验 permission.create 权限"),Pe=U("校验 permission.browse 或 permission.create 权限"),Ve=U("校验 permission.browse 和 permission.create 权限"),Be={__name:"index",setup(e){const{proxy:s}=Z(),t=I(),n=N();function o(e){ie.service({lock:!0,text:"帐号切换中",background:"rgba(0, 0, 0, 0.7)"}),n.login({account:e,password:""}).then((()=>{setTimeout((()=>{location.reload()}),1e3)}))}function l(e){s.$auth(e)?W.success("校验通过"):W.error("校验不通过")}return(e,i)=>{const a=X,r=G,u=J,d=K,c=F,m=re,p=S,b=q,v=D,y=F,x=re;return V(),B("div",null,[w(a,{title:"权限验证"}),w(v,null,{default:f((()=>[R(t).app.enablePermission?(V(),B("div",de,[ce,w(u,{modelValue:R(n).account,"onUpdate:modelValue":i[0]||(i[0]=e=>R(n).account=e),onChange:o},{default:f((()=>[w(r,{label:"admin"}),w(r,{label:"test"})])),_:1},8,["modelValue"]),me,H("div",null,M(R(n).permissions),1),pe,H("div",null,[w(c,{value:"permission.browse",style:{"margin-bottom":"10px"}},{"no-auth":f((()=>[w(d,{type:"danger"},{default:f((()=>[ve])),_:1})])),default:f((()=>[w(d,null,{default:f((()=>[be])),_:1})])),_:1}),w(c,{value:"permission.create",style:{"margin-bottom":"10px"}},{"no-auth":f((()=>[w(d,{type:"danger"},{default:f((()=>[ge])),_:1})])),default:f((()=>[w(d,null,{default:f((()=>[fe])),_:1})])),_:1}),w(c,{value:["permission.browse","permission.create"],style:{"margin-bottom":"10px"}},{"no-auth":f((()=>[w(d,{type:"danger"},{default:f((()=>[we])),_:1})])),default:f((()=>[w(d,null,{default:f((()=>[ye])),_:1})])),_:1},8,["value"]),w(m,{value:["permission.browse","permission.create"]},{"no-auth":f((()=>[w(d,{type:"danger"},{default:f((()=>[he])),_:1})])),default:f((()=>[w(d,null,{default:f((()=>[xe])),_:1})])),_:1},8,["value"])]),ke,H("div",null,[g((V(),B("div",null,_e)),[[y,"permission.browse"]]),g((V(),B("div",null,Ce)),[[y,"permission.create"]]),g((V(),B("div",null,je)),[[y,["permission.browse","permission.create"]]]),g((V(),B("div",null,Ae)),[[x,["permission.browse","permission.create"]]])]),Oe,H("div",null,[w(b,{style:{display:"block","margin-bottom":"10px"}},{default:f((()=>[w(p,{onClick:i[1]||(i[1]=e=>l("permission.browse"))},{default:f((()=>[$e])),_:1}),w(p,{onClick:i[2]||(i[2]=e=>l("permission.create"))},{default:f((()=>[Le])),_:1})])),_:1}),w(b,null,{default:f((()=>[w(p,{onClick:i[3]||(i[3]=e=>l(["permission.browse","permission.create"]))},{default:f((()=>[Pe])),_:1}),w(p,{onClick:i[4]||(i[4]=e=>{return t=["permission.browse","permission.create"],void(s.$authAll(t)?W.success("校验通过"):W.error("校验不通过"));var t})},{default:f((()=>[Ve])),_:1})])),_:1})])])):(V(),B("div",ue,"请到 seeting.js 里打开权限功能，再进入该页面查看演示"))])),_:1})])}}};"function"==typeof z&&z(Be);export{Be as default};
