
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * https://fantastic-admin.netlify.app
 * 代码仓库
 * Gitee  https://gitee.com/hooray/fantastic-admin
 * Github https://github.com/hooray/fantastic-admin
 */
    
import{f as e,u as n,g as a,h as t,i as r,d as s,c as l,t as o,T as i,j as u,C as c}from"./panel-time-pick.a3e766a6.js";import{cj as p,bW as d,W as m,Z as f,d as v,aq as b,u as g,$ as h,c as k,r as w,b as S,f as y,D as A,n as V,i as _,G as O,h as x,m as R,_ as C,bB as E,aL as T,Y as j,aJ as D}from"./index.8b097f1d.js";import{b as I}from"./_baseFlatten.75159899.js";import{a as P,S as B,s as M,b as H,c as q}from"./isEqual.bb870313.js";function F(e){return e}function K(e,n,a){switch(a.length){case 0:return e.call(n);case 1:return e.call(n,a[0]);case 2:return e.call(n,a[0],a[1]);case 3:return e.call(n,a[0],a[1],a[2])}return e.apply(n,a)}var U=Date.now;var W=p?function(e,n){return p(e,"toString",{configurable:!0,enumerable:!1,value:(a=n,function(){return a}),writable:!0});var a}:F;var $,G,J;const L=($=W,G=0,J=0,function(){var e=U(),n=16-(e-J);if(J=e,n>0){if(++G>=800)return arguments[0]}else G=0;return $.apply(void 0,arguments)});function Y(e){return e!=e}function Z(e,n){return!!(null==e?0:e.length)&&function(e,n,a){return n==n?function(e,n,a){for(var t=a-1,r=e.length;++t<r;)if(e[t]===n)return t;return-1}(e,n,a):function(e,n,a,t){for(var r=e.length,s=a+(t?1:-1);t?s--:++s<r;)if(n(e[s],s,e))return s;return-1}(e,Y,a)}(e,n,0)>-1}var z=Math.max;function N(e){return d(e)&&P(e)}function Q(e,n,a){for(var t=-1,r=null==e?0:e.length;++t<r;)if(a(n,e[t]))return!0;return!1}const X=B&&1/M(new B([,-0]))[1]==1/0?function(e){return new B(e)}:function(){};var ee=function(e,n){return L(function(e,n,a){return n=z(void 0===n?e.length-1:n,0),function(){for(var t=arguments,r=-1,s=z(t.length-n,0),l=Array(s);++r<s;)l[r]=t[n+r];r=-1;for(var o=Array(n+1);++r<n;)o[r]=t[r];return o[n]=a(l),K(e,this,o)}}(e,n,F),e+"")}((function(e){return function(e,n,a){var t=-1,r=Z,s=e.length,l=!0,o=[],i=o;if(a)l=!1,r=Q;else if(s>=200){var u=n?null:X(e);if(u)return M(u);l=!1,r=q,i=new H}else i=n?[]:o;e:for(;++t<s;){var c=e[t],p=n?n(c):c;if(c=a||0!==c?c:0,l&&p==p){for(var d=i.length;d--;)if(i[d]===p)continue e;n&&i.push(p),o.push(c)}else r(i,p,a)||(i!==o&&i.push(p),o.push(c))}return o}(I(e,1,N,!0))}));const ne=ee,ae=m({...e,parsedValue:{type:f(Array)}}),te=["disabled"];var re=C(v({__name:"panel-time-range",props:ae,emits:["pick","select-range","set-picker-option"],setup(e,{emit:l}){const o=e,i=(e,n)=>{const a=[];for(let t=e;t<=n;t++)a.push(t);return a},{t:u,lang:c}=b(),p=g("time"),d=g("picker"),m=h("EP_PICKER_BASE"),{arrowControl:f,disabledHours:v,disabledMinutes:C,disabledSeconds:j,defaultValue:D}=m.props,I=k((()=>o.parsedValue[0])),P=k((()=>o.parsedValue[1])),B=n(o),M=k((()=>o.format.includes("ss"))),H=k((()=>o.format.includes("A")?"A":o.format.includes("a")?"a":"")),q=e=>{K(e.millisecond(0),P.value)},F=e=>{K(I.value,e.millisecond(0))},K=(e,n)=>{l("pick",[e,n],!0)},U=k((()=>I.value>P.value)),W=w([0,2]),$=(e,n)=>{l("select-range",e,n,"min"),W.value=[e,n]},G=k((()=>M.value?11:8)),J=(e,n)=>{l("select-range",e,n,"max");const a=_(G);W.value=[e+a,n+a]},L=(e,n)=>{const a=v?v(e):[],t="start"===e,r=(n||(t?P.value:I.value)).hour(),s=t?i(r+1,23):i(0,r-1);return ne(a,s)},Y=(e,n,a)=>{const t=C?C(e,n):[],r="start"===n,s=a||(r?P.value:I.value);if(e!==s.hour())return t;const l=s.minute(),o=r?i(l+1,59):i(0,l-1);return ne(t,o)},Z=(e,n,a,t)=>{const r=j?j(e,n,a):[],s="start"===a,l=t||(s?P.value:I.value),o=l.hour(),u=l.minute();if(e!==o||n!==u)return r;const c=l.second(),p=s?i(c+1,59):i(0,c-1);return ne(r,p)},z=([e,n])=>[ae(e,"start",!0,n),ae(n,"end",!1,e)],{getAvailableHours:N,getAvailableMinutes:Q,getAvailableSeconds:X}=a(L,Y,Z),{timePickerOptions:ee,getAvailableTime:ae,onSetOption:re}=t({getAvailableHours:N,getAvailableMinutes:Q,getAvailableSeconds:X});return l("set-picker-option",["formatToString",e=>e?E(e)?e.map((e=>e.format(o.format))):e.format(o.format):null]),l("set-picker-option",["parseUserInput",e=>e?E(e)?e.map((e=>s(e,o.format).locale(c.value))):s(e,o.format).locale(c.value):null]),l("set-picker-option",["isValidValue",e=>{const n=e.map((e=>s(e).locale(c.value))),a=z(n);return n[0].isSame(a[0])&&n[1].isSame(a[1])}]),l("set-picker-option",["handleKeydownInput",e=>{const n=e.code,{left:a,right:t,up:r,down:s}=T;if([a,t].includes(n)){return(e=>{const n=M.value?[0,3,6,11,14,17]:[0,3,8,11],a=["hours","minutes"].concat(M.value?["seconds"]:[]),t=(n.indexOf(W.value[0])+e+n.length)%n.length,r=n.length/2;t<r?ee.start_emitSelectRange(a[t]):ee.end_emitSelectRange(a[t-r])})(n===a?-1:1),void e.preventDefault()}if([r,s].includes(n)){const a=n===r?-1:1,t=W.value[0]<G.value?"start":"end";return ee[`${t}_scrollDown`](a),void e.preventDefault()}}]),l("set-picker-option",["getDefaultValue",()=>{if(E(D))return D.map((e=>s(e).locale(c.value)));const e=s(D).locale(c.value);return[e,e.add(60,"m")]}]),l("set-picker-option",["getRangeAvailableTime",z]),(e,n)=>e.actualVisible?(S(),y("div",{key:0,class:V([_(p).b("range-picker"),_(d).b("panel")])},[A("div",{class:V(_(p).be("range-picker","content"))},[A("div",{class:V(_(p).be("range-picker","cell"))},[A("div",{class:V(_(p).be("range-picker","header"))},O(_(u)("el.datepicker.startTime")),3),A("div",{class:V([_(p).be("range-picker","body"),_(p).be("panel","content"),_(p).is("arrow",_(f)),{"has-seconds":_(M)}])},[x(r,{ref:"minSpinner",role:"start","show-seconds":_(M),"am-pm-mode":_(H),"arrow-control":_(f),"spinner-date":_(I),"disabled-hours":L,"disabled-minutes":Y,"disabled-seconds":Z,onChange:q,onSetOption:_(re),onSelectRange:$},null,8,["show-seconds","am-pm-mode","arrow-control","spinner-date","onSetOption"])],2)],2),A("div",{class:V(_(p).be("range-picker","cell"))},[A("div",{class:V(_(p).be("range-picker","header"))},O(_(u)("el.datepicker.endTime")),3),A("div",{class:V([_(p).be("range-picker","body"),_(p).be("panel","content"),_(p).is("arrow",_(f)),{"has-seconds":_(M)}])},[x(r,{ref:"maxSpinner",role:"end","show-seconds":_(M),"am-pm-mode":_(H),"arrow-control":_(f),"spinner-date":_(P),"disabled-hours":L,"disabled-minutes":Y,"disabled-seconds":Z,onChange:F,onSetOption:_(re),onSelectRange:J},null,8,["show-seconds","am-pm-mode","arrow-control","spinner-date","onSetOption"])],2)],2)],2),A("div",{class:V(_(p).be("panel","footer"))},[A("button",{type:"button",class:V([_(p).be("panel","btn"),"cancel"]),onClick:n[0]||(n[0]=e=>{l("pick",B.value,!1)})},O(_(u)("el.datepicker.cancel")),3),A("button",{type:"button",class:V([_(p).be("panel","btn"),"confirm"]),disabled:_(U),onClick:n[1]||(n[1]=e=>((e=!1)=>{l("pick",[I.value,P.value],e)})())},O(_(u)("el.datepicker.confirm")),11,te)],2)],2)):R("v-if",!0)}}),[["__file","/home/runner/work/element-plus/element-plus/packages/components/time-picker/src/time-picker-com/panel-time-range.vue"]]);s.extend(l);const se=v({name:"ElTimePicker",install:null,props:{...o,isRange:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(e,n){const a=w(),[t,r]=e.isRange?["timerange",re]:["time",i],s=e=>n.emit("update:modelValue",e);return j("ElPopperOptions",e.popperOptions),n.expose({focus:e=>{var n;null==(n=a.value)||n.handleFocusInput(e)},blur:e=>{var n;null==(n=a.value)||n.handleBlurInput(e)}}),()=>{var n;const l=null!=(n=e.format)?n:u;return x(c,D(e,{ref:a,type:t,format:l,"onUpdate:modelValue":s}),{default:e=>x(r,e,null)})}}});se.install=e=>{e.component(se.name,se)};const le=se;export{le as E};
