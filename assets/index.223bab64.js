
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * https://fantastic-admin.netlify.app
 * 代码仓库
 * Gitee  https://gitee.com/hooray/fantastic-admin
 * Github https://github.com/hooray/fantastic-admin
 */
    
var e=Object.defineProperty,s=Object.defineProperties,t=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,a=(s,t,o)=>t in s?e(s,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):s[t]=o,i=(e,s)=>{for(var t in s||(s={}))n.call(s,t)&&a(e,t,s[t]);if(o)for(var t of o(s))l.call(s,t)&&a(e,t,s[t]);return e},r=(e,o)=>s(e,t(o));import{X as u,u as d,r as c,aO as m,dA as p,ab as b,ad as v,w as f,aq as g,ar as y,h as w,T as x,a5 as h,ak as k,aC as C,af as _,a7 as j,a9 as A,aS as O,dV as $,a4 as L,d as P,b as V,f as B,dW as E,g as T,x as I,aD as N,aw as S,bN as q,bl as z,bL as D,i as R,B as H,L as M,$ as U,az as W,bO as X,C as Z}from"./index.1763518e.js";import{_ as F}from"./index.e36b0d7a.js";/* empty css               *//* empty css                       *//* empty css                        *//* empty css                   */import{E as G,a as J}from"./index.8c111813.js";import{E as K}from"./index.a00a59b1.js";import"./event.fa25aaef.js";let Q;const Y=function(e={}){if(!h)return;const s=ee(e);if(s.fullscreen&&Q)return Q;const t=function(e){let s;const t=d("loading"),o=c(!1),n=m(r(i({},e),{originalPosition:"",originalOverflow:"",visible:!1}));function l(){const e=n.parent;if(!e.vLoadingAddClassList){let s=e.getAttribute("loading-number");s=Number.parseInt(s)-1,s?e.setAttribute("loading-number",s.toString()):(b(e,t.bm("parent","relative")),e.removeAttribute("loading-number")),b(e,t.bm("parent","hidden"))}a(),k.unmount()}function a(){var e,s;null==(s=null==(e=C.$el)?void 0:e.parentNode)||s.removeChild(C.$el)}function h(){o.value&&(o.value=!1,l())}const k=p({name:"ElLoading",setup:()=>()=>{const e=n.spinner||n.svg,s=v("svg",i({class:"circular",viewBox:n.svgViewBox?n.svgViewBox:"25 25 50 50"},e?{innerHTML:e}:{}),[v("circle",{class:"path",cx:"50",cy:"50",r:"20",fill:"none"})]),o=n.text?v("p",{class:t.b("text")},[n.text]):void 0;return v(x,{name:t.b("fade"),onAfterLeave:h},{default:f((()=>[g(w("div",{style:{backgroundColor:n.background||""},class:[t.b("mask"),n.customClass,n.fullscreen?"is-fullscreen":""]},[v("div",{class:t.b("spinner")},[s,o])]),[[y,n.visible]])]))})}}),C=k.mount(document.createElement("div"));return r(i({},u(n)),{setText:function(e){n.text=e},removeElLoadingChild:a,close:function(){var t;e.beforeClose&&!e.beforeClose()||(n.parent.vLoadingAddClassList=void 0,o.value=!0,clearTimeout(s),s=window.setTimeout((()=>{o.value&&(o.value=!1,l())}),400),n.visible=!1,null==(t=e.closed)||t.call(e))},handleAfterLeave:h,vm:C,get $el(){return C.$el}})}(r(i({},s),{closed:()=>{var e;null==(e=s.closed)||e.call(s),s.fullscreen&&(Q=void 0)}}));se(s,s.parent,t),te(s,s.parent,t),s.parent.vLoadingAddClassList=()=>te(s,s.parent,t);let o=s.parent.getAttribute("loading-number");return o=o?`${Number.parseInt(o)+1}`:"1",s.parent.setAttribute("loading-number",o),s.parent.appendChild(t.$el),k((()=>t.visible.value=s.visible)),s.fullscreen&&(Q=t),t},ee=e=>{var s,t,o,n;let l;return l=C(e.target)?null!=(s=document.querySelector(e.target))?s:document.body:e.target||document.body,{parent:l===document.body||e.body?document.body:l,background:e.background||"",svg:e.svg||"",svgViewBox:e.svgViewBox||"",spinner:e.spinner||!1,text:e.text||"",fullscreen:l===document.body&&(null==(t=e.fullscreen)||t),lock:null!=(o=e.lock)&&o,customClass:e.customClass||"",visible:null==(n=e.visible)||n,target:l}},se=async(e,s,t)=>{const{nextZIndex:o}=_(),n={};if(e.fullscreen)t.originalPosition.value=j(document.body,"position"),t.originalOverflow.value=j(document.body,"overflow"),n.zIndex=o();else if(e.parent===document.body){t.originalPosition.value=j(document.body,"position"),await k();for(const s of["top","left"]){const t="top"===s?"scrollTop":"scrollLeft";n[s]=e.target.getBoundingClientRect()[s]+document.body[t]+document.documentElement[t]-Number.parseInt(j(document.body,`margin-${s}`),10)+"px"}for(const s of["height","width"])n[s]=`${e.target.getBoundingClientRect()[s]}px`}else t.originalPosition.value=j(s,"position");for(const[l,a]of Object.entries(n))t.$el.style[l]=a},te=(e,s,t)=>{const o=d("loading");"absolute"!==t.originalPosition.value&&"fixed"!==t.originalPosition.value?A(s,o.bm("parent","relative")):b(s,o.bm("parent","relative")),e.fullscreen&&e.lock?A(s,o.bm("parent","hidden")):b(s,o.bm("parent","hidden"))},oe=Symbol("ElLoading"),ne=(e,s)=>{var t,o,n,l;const a=s.instance,i=e=>O(s.value)?s.value[e]:void 0,r=s=>(e=>{const s=C(e)&&(null==a?void 0:a[e])||e;return s?c(s):s})(i(s)||e.getAttribute(`element-loading-${$(s)}`)),u=null!=(t=i("fullscreen"))?t:s.modifiers.fullscreen,d={text:r("text"),svg:r("svg"),svgViewBox:r("svgViewBox"),spinner:r("spinner"),background:r("background"),customClass:r("customClass"),fullscreen:u,target:null!=(o=i("target"))?o:u?void 0:e,body:null!=(n=i("body"))?n:s.modifiers.body,lock:null!=(l=i("lock"))?l:s.modifiers.lock};e[oe]={options:d,instance:Y(d)}},le={mounted(e,s){s.value&&ne(e,s)},updated(e,s){const t=e[oe];s.oldValue!==s.value&&(s.value&&!s.oldValue?ne(e,s):s.value&&s.oldValue?O(s.value)&&((e,s)=>{for(const t of Object.keys(s))L(s[t])&&(s[t].value=e[t])})(s.value,t.options):null==t||t.instance.close())},unmounted(e){var s;null==(s=e[oe])||s.instance.close()}},ae={install(e){e.directive("loading",le),e.config.globalProperties.$loading=Y},directive:le,service:Y},ie=P({name:"AuthAll"}),re=Object.assign(ie,{props:{value:{type:Array,default:()=>[]}},setup(e){const s=e;return(e,t)=>(V(),B("div",null,[E(s.value)?T(e.$slots,"default",{key:0}):T(e.$slots,"no-auth",{key:1})]))}});const ue={key:0},de={key:1},ce=H("h3",null,"切换帐号",-1),me=H("h3",null,"帐号权限",-1),pe=H("h3",null,"鉴权组件（请对照代码查看）",-1),be=U("你有 permission.browse 权限"),ve=U("你没有 permission.browse 权限"),fe=U("你有 permission.create 权限"),ge=U("你没有 permission.create 权限"),ye=U("你有 permission.browse 或 permission.create 权限"),we=U("你没有 permission.browse 或 permission.create 权限"),xe=U("你有 permission.browse 和 permission.create 权限"),he=U("你没有 permission.browse 和 permission.create 权限"),ke=H("h3",null,"鉴权指令（请对照代码查看）",-1),Ce=[U(" 如果你有 permission.browse 权限则能看到这句话 ")],_e=[U(" 如果你有 permission.create 权限则能看到这句话 ")],je=[U(" 如果你有 permission.browse 或 permission.create 权限则能看到这句话 ")],Ae=[U(" 如果你有 permission.browse 和 permission.create 权限则能看到这句话 ")],Oe=H("h3",null,"鉴权函数（请对照代码查看）",-1),$e=U("校验 permission.browse 权限"),Le=U("校验 permission.create 权限"),Pe=U("校验 permission.browse 或 permission.create 权限"),Ve=U("校验 permission.browse 和 permission.create 权限"),Be={__name:"index",setup(e){const{proxy:s}=Z(),t=I(),o=N();function n(e){ae.service({lock:!0,text:"帐号切换中",background:"rgba(0, 0, 0, 0.7)"}),o.login({account:e,password:""}).then((()=>{setTimeout((()=>{location.reload()}),1e3)}))}function l(e){s.$auth(e)?W.success("校验通过"):W.error("校验不通过")}return(e,a)=>{const i=X,r=G,u=J,d=K,c=F,m=re,p=S,b=q,v=D,y=F,x=re;return V(),B("div",null,[w(i,{title:"权限验证"}),w(v,null,{default:f((()=>[R(t).app.enablePermission?(V(),B("div",de,[ce,w(u,{modelValue:R(o).account,"onUpdate:modelValue":a[0]||(a[0]=e=>R(o).account=e),onChange:n},{default:f((()=>[w(r,{label:"admin"}),w(r,{label:"test"})])),_:1},8,["modelValue"]),me,H("div",null,M(R(o).permissions),1),pe,H("div",null,[w(c,{value:"permission.browse",style:{"margin-bottom":"10px"}},{"no-auth":f((()=>[w(d,{type:"danger"},{default:f((()=>[ve])),_:1})])),default:f((()=>[w(d,null,{default:f((()=>[be])),_:1})])),_:1}),w(c,{value:"permission.create",style:{"margin-bottom":"10px"}},{"no-auth":f((()=>[w(d,{type:"danger"},{default:f((()=>[ge])),_:1})])),default:f((()=>[w(d,null,{default:f((()=>[fe])),_:1})])),_:1}),w(c,{value:["permission.browse","permission.create"],style:{"margin-bottom":"10px"}},{"no-auth":f((()=>[w(d,{type:"danger"},{default:f((()=>[we])),_:1})])),default:f((()=>[w(d,null,{default:f((()=>[ye])),_:1})])),_:1},8,["value"]),w(m,{value:["permission.browse","permission.create"]},{"no-auth":f((()=>[w(d,{type:"danger"},{default:f((()=>[he])),_:1})])),default:f((()=>[w(d,null,{default:f((()=>[xe])),_:1})])),_:1},8,["value"])]),ke,H("div",null,[g((V(),B("div",null,Ce)),[[y,"permission.browse"]]),g((V(),B("div",null,_e)),[[y,"permission.create"]]),g((V(),B("div",null,je)),[[y,["permission.browse","permission.create"]]]),g((V(),B("div",null,Ae)),[[x,["permission.browse","permission.create"]]])]),Oe,H("div",null,[w(b,{style:{display:"block","margin-bottom":"10px"}},{default:f((()=>[w(p,{onClick:a[1]||(a[1]=e=>l("permission.browse"))},{default:f((()=>[$e])),_:1}),w(p,{onClick:a[2]||(a[2]=e=>l("permission.create"))},{default:f((()=>[Le])),_:1})])),_:1}),w(b,null,{default:f((()=>[w(p,{onClick:a[3]||(a[3]=e=>l(["permission.browse","permission.create"]))},{default:f((()=>[Pe])),_:1}),w(p,{onClick:a[4]||(a[4]=e=>{return t=["permission.browse","permission.create"],void(s.$authAll(t)?W.success("校验通过"):W.error("校验不通过"));var t})},{default:f((()=>[Ve])),_:1})])),_:1})])])):(V(),B("div",ue,"请到 seeting.js 里打开权限功能，再进入该页面查看演示"))])),_:1})])}}};"function"==typeof z&&z(Be);export{Be as default};
