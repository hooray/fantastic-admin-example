
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * https://fantastic-admin.netlify.app
 * 代码仓库
 * Gitee  https://gitee.com/hooray/fantastic-admin
 * Github https://github.com/hooray/fantastic-admin
 */
    
var e=Object.defineProperty,t=Object.defineProperties,s=Object.getOwnPropertyDescriptors,n=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,a=(t,s,n)=>s in t?e(t,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[s]=n,r=(e,t)=>{for(var s in t||(t={}))o.call(t,s)&&a(e,s,t[s]);if(n)for(var s of n(t))l.call(t,s)&&a(e,s,t[s]);return e},i=(e,n)=>t(e,s(n));import{X as u,u as c,r as d,aO as p,dA as m,ab as b,ad as v,w as f,aq as g,ar as y,h as w,T as x,a5 as h,ak as k,aC as C,af as _,a7 as j,a9 as A,aS as $,dU as O,a4 as L,d as P,b as V,f as B,dV as E,g as T,dW as I,x as S,aD as N,aw as q,bN as z,bl as D,bL as R,cf as U,i as H,B as M,L as W,$ as X,az as Z,bO as F,C as G}from"./index.c1b4762b.js";/* empty css               *//* empty css                       *//* empty css                        *//* empty css                   */import{E as J,a as K}from"./index.e6640b76.js";import{E as Q}from"./index.b6b1324b.js";import"./event.a088884a.js";let Y;const ee=function(e={}){if(!h)return;const t=te(e);if(t.fullscreen&&Y)return Y;const s=function(e){let t;const s=c("loading"),n=d(!1),o=p(i(r({},e),{originalPosition:"",originalOverflow:"",visible:!1}));function l(){const e=o.parent;if(!e.vLoadingAddClassList){let t=e.getAttribute("loading-number");t=Number.parseInt(t)-1,t?e.setAttribute("loading-number",t.toString()):(b(e,s.bm("parent","relative")),e.removeAttribute("loading-number")),b(e,s.bm("parent","hidden"))}a(),k.unmount()}function a(){var e,t;null==(t=null==(e=C.$el)?void 0:e.parentNode)||t.removeChild(C.$el)}function h(){n.value&&(n.value=!1,l())}const k=m({name:"ElLoading",setup:()=>()=>{const e=o.spinner||o.svg,t=v("svg",r({class:"circular",viewBox:o.svgViewBox?o.svgViewBox:"25 25 50 50"},e?{innerHTML:e}:{}),[v("circle",{class:"path",cx:"50",cy:"50",r:"20",fill:"none"})]),n=o.text?v("p",{class:s.b("text")},[o.text]):void 0;return v(x,{name:s.b("fade"),onAfterLeave:h},{default:f((()=>[g(w("div",{style:{backgroundColor:o.background||""},class:[s.b("mask"),o.customClass,o.fullscreen?"is-fullscreen":""]},[v("div",{class:s.b("spinner")},[t,n])]),[[y,o.visible]])]))})}}),C=k.mount(document.createElement("div"));return i(r({},u(o)),{setText:function(e){o.text=e},removeElLoadingChild:a,close:function(){var s;e.beforeClose&&!e.beforeClose()||(o.parent.vLoadingAddClassList=void 0,n.value=!0,clearTimeout(t),t=window.setTimeout((()=>{n.value&&(n.value=!1,l())}),400),o.visible=!1,null==(s=e.closed)||s.call(e))},handleAfterLeave:h,vm:C,get $el(){return C.$el}})}(i(r({},t),{closed:()=>{var e;null==(e=t.closed)||e.call(t),t.fullscreen&&(Y=void 0)}}));se(t,t.parent,s),ne(t,t.parent,s),t.parent.vLoadingAddClassList=()=>ne(t,t.parent,s);let n=t.parent.getAttribute("loading-number");return n=n?`${Number.parseInt(n)+1}`:"1",t.parent.setAttribute("loading-number",n),t.parent.appendChild(s.$el),k((()=>s.visible.value=t.visible)),t.fullscreen&&(Y=s),s},te=e=>{var t,s,n,o;let l;return l=C(e.target)?null!=(t=document.querySelector(e.target))?t:document.body:e.target||document.body,{parent:l===document.body||e.body?document.body:l,background:e.background||"",svg:e.svg||"",svgViewBox:e.svgViewBox||"",spinner:e.spinner||!1,text:e.text||"",fullscreen:l===document.body&&(null==(s=e.fullscreen)||s),lock:null!=(n=e.lock)&&n,customClass:e.customClass||"",visible:null==(o=e.visible)||o,target:l}},se=async(e,t,s)=>{const{nextZIndex:n}=_(),o={};if(e.fullscreen)s.originalPosition.value=j(document.body,"position"),s.originalOverflow.value=j(document.body,"overflow"),o.zIndex=n();else if(e.parent===document.body){s.originalPosition.value=j(document.body,"position"),await k();for(const t of["top","left"]){const s="top"===t?"scrollTop":"scrollLeft";o[t]=e.target.getBoundingClientRect()[t]+document.body[s]+document.documentElement[s]-Number.parseInt(j(document.body,`margin-${t}`),10)+"px"}for(const t of["height","width"])o[t]=`${e.target.getBoundingClientRect()[t]}px`}else s.originalPosition.value=j(t,"position");for(const[l,a]of Object.entries(o))s.$el.style[l]=a},ne=(e,t,s)=>{const n=c("loading");"absolute"!==s.originalPosition.value&&"fixed"!==s.originalPosition.value?A(t,n.bm("parent","relative")):b(t,n.bm("parent","relative")),e.fullscreen&&e.lock?A(t,n.bm("parent","hidden")):b(t,n.bm("parent","hidden"))},oe=Symbol("ElLoading"),le=(e,t)=>{var s,n,o,l;const a=t.instance,r=e=>$(t.value)?t.value[e]:void 0,i=t=>(e=>{const t=C(e)&&(null==a?void 0:a[e])||e;return t?d(t):t})(r(t)||e.getAttribute(`element-loading-${O(t)}`)),u=null!=(s=r("fullscreen"))?s:t.modifiers.fullscreen,c={text:i("text"),svg:i("svg"),svgViewBox:i("svgViewBox"),spinner:i("spinner"),background:i("background"),customClass:i("customClass"),fullscreen:u,target:null!=(n=r("target"))?n:u?void 0:e,body:null!=(o=r("body"))?o:t.modifiers.body,lock:null!=(l=r("lock"))?l:t.modifiers.lock};e[oe]={options:c,instance:ee(c)}},ae={mounted(e,t){t.value&&le(e,t)},updated(e,t){const s=e[oe];t.oldValue!==t.value&&(t.value&&!t.oldValue?le(e,t):t.value&&t.oldValue?$(t.value)&&((e,t)=>{for(const s of Object.keys(t))L(t[s])&&(t[s].value=e[s])})(t.value,s.options):null==s||s.instance.close())},unmounted(e){var t;null==(t=e[oe])||t.instance.close()}},re={install(e){e.directive("loading",ae),e.config.globalProperties.$loading=ee},directive:ae,service:ee},ie=P({name:"AuthAll"}),ue=Object.assign(ie,{props:{value:{type:Array,default:()=>[]}},setup(e){const t=e;return(e,s)=>(V(),B("div",null,[E(t.value)?T(e.$slots,"default",{key:0}):T(e.$slots,"no-auth",{key:1})]))}}),ce=P({name:"Auth"}),de=Object.assign(ce,{props:{value:{type:[String,Array],default:""}},setup(e){const t=e;return(e,s)=>(V(),B("div",null,[I(t.value)?T(e.$slots,"default",{key:0}):T(e.$slots,"no-auth",{key:1})]))}});const pe={key:0},me={key:1},be=M("h3",null,"切换帐号",-1),ve=M("h3",null,"帐号权限",-1),fe=M("h3",null,"鉴权组件（请对照代码查看）",-1),ge=X("你有 permission.browse 权限"),ye=X("你没有 permission.browse 权限"),we=X("你有 permission.create 权限"),xe=X("你没有 permission.create 权限"),he=X("你有 permission.browse 或 permission.create 权限"),ke=X("你没有 permission.browse 或 permission.create 权限"),Ce=X("你有 permission.browse 和 permission.create 权限"),_e=X("你没有 permission.browse 和 permission.create 权限"),je=M("h3",null,"鉴权指令（请对照代码查看）",-1),Ae=[X(" 如果你有 permission.browse 权限则能看到这句话 ")],$e=[X(" 如果你有 permission.create 权限则能看到这句话 ")],Oe=[X(" 如果你有 permission.browse 或 permission.create 权限则能看到这句话 ")],Le=[X(" 如果你有 permission.browse 和 permission.create 权限则能看到这句话 ")],Pe=M("h3",null,"鉴权函数（请对照代码查看）",-1),Ve=X("校验 permission.browse 权限"),Be=X("校验 permission.create 权限"),Ee=X("校验 permission.browse 或 permission.create 权限"),Te=X("校验 permission.browse 和 permission.create 权限"),Ie={__name:"index",setup(e){const{proxy:t}=G(),s=S(),n=N();function o(e){re.service({lock:!0,text:"帐号切换中",background:"rgba(0, 0, 0, 0.7)"}),n.login({account:e,password:""}).then((()=>{setTimeout((()=>{location.reload()}),1e3)}))}function l(e){t.$auth(e)?Z.success("校验通过"):Z.error("校验不通过")}return(e,a)=>{const r=F,i=J,u=K,c=Q,d=de,p=ue,m=q,b=z,v=R,y=U("auth"),x=U("auth-all");return V(),B("div",null,[w(r,{title:"权限验证"}),w(v,null,{default:f((()=>[H(s).app.enablePermission?(V(),B("div",me,[be,w(u,{modelValue:H(n).account,"onUpdate:modelValue":a[0]||(a[0]=e=>H(n).account=e),onChange:o},{default:f((()=>[w(i,{label:"admin"}),w(i,{label:"test"})])),_:1},8,["modelValue"]),ve,M("div",null,W(H(n).permissions),1),fe,M("div",null,[w(d,{value:"permission.browse",style:{"margin-bottom":"10px"}},{"no-auth":f((()=>[w(c,{type:"danger"},{default:f((()=>[ye])),_:1})])),default:f((()=>[w(c,null,{default:f((()=>[ge])),_:1})])),_:1}),w(d,{value:"permission.create",style:{"margin-bottom":"10px"}},{"no-auth":f((()=>[w(c,{type:"danger"},{default:f((()=>[xe])),_:1})])),default:f((()=>[w(c,null,{default:f((()=>[we])),_:1})])),_:1}),w(d,{value:["permission.browse","permission.create"],style:{"margin-bottom":"10px"}},{"no-auth":f((()=>[w(c,{type:"danger"},{default:f((()=>[ke])),_:1})])),default:f((()=>[w(c,null,{default:f((()=>[he])),_:1})])),_:1},8,["value"]),w(p,{value:["permission.browse","permission.create"]},{"no-auth":f((()=>[w(c,{type:"danger"},{default:f((()=>[_e])),_:1})])),default:f((()=>[w(c,null,{default:f((()=>[Ce])),_:1})])),_:1},8,["value"])]),je,M("div",null,[g((V(),B("div",null,Ae)),[[y,"permission.browse"]]),g((V(),B("div",null,$e)),[[y,"permission.create"]]),g((V(),B("div",null,Oe)),[[y,["permission.browse","permission.create"]]]),g((V(),B("div",null,Le)),[[x,["permission.browse","permission.create"]]])]),Pe,M("div",null,[w(b,{style:{display:"block","margin-bottom":"10px"}},{default:f((()=>[w(m,{onClick:a[1]||(a[1]=e=>l("permission.browse"))},{default:f((()=>[Ve])),_:1}),w(m,{onClick:a[2]||(a[2]=e=>l("permission.create"))},{default:f((()=>[Be])),_:1})])),_:1}),w(b,null,{default:f((()=>[w(m,{onClick:a[3]||(a[3]=e=>l(["permission.browse","permission.create"]))},{default:f((()=>[Ee])),_:1}),w(m,{onClick:a[4]||(a[4]=e=>{return s=["permission.browse","permission.create"],void(t.$authAll(s)?Z.success("校验通过"):Z.error("校验不通过"));var s})},{default:f((()=>[Te])),_:1})])),_:1})])])):(V(),B("div",pe,"请到 seeting.js 里打开权限功能，再进入该页面查看演示"))])),_:1})])}}};"function"==typeof D&&D(Ie);export{Ie as default};
