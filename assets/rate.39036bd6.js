
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * https://fantastic-admin.netlify.app
 * 代码仓库
 * Gitee  https://gitee.com/hooray/fantastic-admin
 * Github https://github.com/hooray/fantastic-admin
 */
    
import{W as e,Z as l,aR as a,c7 as o,X as t,c8 as u,aB as s,d as r,$ as d,bz as i,bA as n,b3 as v,u as c,b2 as m,r as f,c as p,bB as b,aV as h,A as y,b as V,f as x,H as w,Q as g,n as S,i as k,h as C,w as T,e as j,F as H,m as A,k as B,E as I,G as _,_ as M,aL as N,a7 as $,q as U,v as D,bu as E,C as F,bv as O,by as W}from"./index.2c25f648.js";import q from"./alert.ba2c9d73.js";import{i as z}from"./validator.f0b04a4e.js";import{C as L,U as P}from"./event.d298a7ab.js";import"./el-alert.254c8453.js";import"./el-link.6cea01f5.js";const R=e({modelValue:{type:Number,default:0},id:{type:String,default:void 0},lowThreshold:{type:Number,default:2},highThreshold:{type:Number,default:4},max:{type:Number,default:5},colors:{type:l([Array,Object]),default:()=>a(["","",""])},voidColor:{type:String,default:""},disabledVoidColor:{type:String,default:""},icons:{type:l([Array,Object]),default:()=>[o,o,o]},voidIcon:{type:t,default:()=>u},disabledVoidIcon:{type:t,default:()=>o},disabled:{type:Boolean},allowHalf:{type:Boolean},showText:{type:Boolean},showScore:{type:Boolean},textColor:{type:String,default:""},texts:{type:l(Array),default:()=>a(["Extremely bad","Disappointed","Fair","Satisfied","Surprise"])},scoreTemplate:{type:String,default:"{value}"},size:{type:String,validator:z},label:{type:String,default:void 0}}),X=["id","aria-label","aria-labelledby","aria-valuenow","aria-valuetext","aria-valuemax"],G=["onMousemove","onClick"];const K=U(M(r({name:"ElRate",props:R,emits:{[L]:e=>s(e),[P]:e=>s(e)},setup(e,{expose:l,emit:a}){const o=e;function t(e,l){const a=e=>h(e),o=Object.keys(l).map((e=>+e)).filter((o=>{const t=l[o];return!!a(t)&&t.excluded?e<o:e<=o})).sort(((e,l)=>e-l)),t=l[o[0]];return a(t)&&t.value||t}const u=d(i,void 0),s=d(n,void 0),r=v(),M=c("rate"),{inputId:U,isLabeledByFormItem:D}=m(o,{formItemContext:s}),E=f(o.modelValue),F=f(-1),O=f(!0),W=p((()=>[M.b(),M.m(r.value)])),q=p((()=>o.disabled||(null==u?void 0:u.disabled))),z=p((()=>M.cssVarBlock({"void-color":o.voidColor,"disabled-void-color":o.disabledVoidColor,"fill-color":Q.value}))),L=p((()=>{let e="";return o.showScore?e=o.scoreTemplate.replace(/\{\s*value\s*\}/,q.value?`${o.modelValue}`:`${E.value}`):o.showText&&(e=o.texts[Math.ceil(E.value)-1]),e})),R=p((()=>100*o.modelValue-100*Math.floor(o.modelValue))),K=p((()=>b(o.colors)?{[o.lowThreshold]:o.colors[0],[o.highThreshold]:{value:o.colors[1],excluded:!0},[o.max]:o.colors[2]}:o.colors)),Q=p((()=>{const e=t(E.value,K.value);return h(e)?"":e})),Z=p((()=>{let e="";return q.value?e=`${R.value}%`:o.allowHalf&&(e="50%"),{color:Q.value,width:e}})),J=p((()=>b(o.icons)?{[o.lowThreshold]:o.icons[0],[o.highThreshold]:{value:o.icons[1],excluded:!0},[o.max]:o.icons[2]}:o.icons)),Y=p((()=>t(o.modelValue,J.value))),ee=p((()=>q.value?o.disabledVoidIcon:o.voidIcon)),le=p((()=>t(E.value,J.value))),ae=p((()=>{const e=Array.from({length:o.max}),l=E.value;return e.fill(le.value,0,l),e.fill(ee.value,l,o.max),e}));function oe(e){const l=q.value&&R.value>0&&e-1<o.modelValue&&e>o.modelValue,a=o.allowHalf&&O.value&&e-.5<=E.value&&e>E.value;return l||a}function te(e){if(q.value)return;let l=E.value;const t=e.code;return t===N.up||t===N.right?(o.allowHalf?l+=.5:l+=1,e.stopPropagation(),e.preventDefault()):t!==N.left&&t!==N.down||(o.allowHalf?l-=.5:l-=1,e.stopPropagation(),e.preventDefault()),l=l<0?0:l,l=l>o.max?o.max:l,a(P,l),a("change",l),l}function ue(e,l){if(!q.value){if(o.allowHalf){let a=l.target;$(a,M.e("item"))&&(a=a.querySelector(`.${M.e("icon")}`)),(0===a.clientWidth||$(a,M.e("decimal")))&&(a=a.parentNode),O.value=2*l.offsetX<=a.clientWidth,E.value=O.value?e-.5:e}else E.value=e;F.value=e}}function se(){q.value||(o.allowHalf&&(O.value=o.modelValue!==Math.floor(o.modelValue)),E.value=o.modelValue,F.value=-1)}return y((()=>o.modelValue),(e=>{E.value=e,O.value=o.modelValue!==Math.floor(o.modelValue)})),o.modelValue||a(P,0),l({setCurrentValue:ue,resetCurrentValue:se}),(e,l)=>{var t;return V(),x("div",{id:k(U),class:S([k(W),k(M).is("disabled",k(q))]),role:"slider","aria-label":k(D)?void 0:e.label||"rating","aria-labelledby":k(D)?null==(t=k(s))?void 0:t.labelId:void 0,"aria-valuenow":E.value,"aria-valuetext":k(L)||void 0,"aria-valuemin":"0","aria-valuemax":e.max,tabindex:"0",style:B(k(z)),onKeydown:te},[(V(!0),x(w,null,g(e.max,((e,l)=>(V(),x("span",{key:l,class:S(k(M).e("item")),onMousemove:l=>ue(e,l),onMouseleave:se,onClick:l=>{return t=e,void(q.value||(o.allowHalf&&O.value?(a(P,E.value),o.modelValue!==E.value&&a("change",E.value)):(a(P,t),o.modelValue!==t&&a("change",t))));var t}},[C(k(I),{class:S([k(M).e("icon"),{hover:F.value===e},k(M).is("active",e<=E.value)])},{default:T((()=>[oe(e)?A("v-if",!0):(V(),j(H(k(ae)[e-1]),{key:0})),oe(e)?(V(),j(k(I),{key:1,style:B(k(Z)),class:S([k(M).e("icon"),k(M).e("decimal")])},{default:T((()=>[(V(),j(H(k(Y))))])),_:1},8,["style","class"])):A("v-if",!0)])),_:2},1032,["class"])],42,G)))),128)),e.showText||e.showScore?(V(),x("span",{key:0,class:S(k(M).e("text"))},_(k(L)),3)):A("v-if",!0)],46,X)}}}),[["__file","/home/runner/work/element-plus/element-plus/packages/components/rate/src/rate.vue"]])),Q={components:{Alert:q},data:()=>({value1:null,value2:null,value3:3.7})};"function"==typeof E&&E(Q);const Z=D(Q,[["render",function(e,l,a,o,t,u){const s=F("Alert"),r=W,d=K,i=O;return V(),x("div",null,[C(s),C(r,{title:"评分"}),C(i,{title:"基础用法",class:"demo"},{default:T((()=>[C(d,{modelValue:t.value1,"onUpdate:modelValue":l[0]||(l[0]=e=>t.value1=e)},null,8,["modelValue"])])),_:1}),C(i,{title:"辅助文字",class:"demo"},{default:T((()=>[C(d,{modelValue:t.value2,"onUpdate:modelValue":l[1]||(l[1]=e=>t.value2=e),"show-text":"",texts:["极差","差","一般","好","极好"]},null,8,["modelValue"])])),_:1}),C(i,{title:"只读",class:"demo"},{default:T((()=>[C(d,{modelValue:t.value3,"onUpdate:modelValue":l[2]||(l[2]=e=>t.value3=e),disabled:"","show-score":"","text-color":"#ff9900","score-template":"{value}"},null,8,["modelValue"])])),_:1})])}]]);export{Z as default};
